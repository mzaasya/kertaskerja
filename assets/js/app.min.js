$(function () {
  // Admin Panel settings
  let notif = localStorage.getItem('notif');
  if (notif) {
    notif = JSON.parse(notif);
    Toast.fire(notif);
    localStorage.removeItem('notif');
  }

  //****************************
  /* This is for the mini-sidebar if width is less then 1170*/
  //****************************
  var setsidebartype = function () {
    var width =
      window.innerWidth > 0 ? window.innerWidth : this.screen.width;
    if (width < 1199) {
      $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
      $("#main-wrapper").addClass("mini-sidebar");
    } else {
      $("#main-wrapper").attr("data-sidebartype", "full");
      $("#main-wrapper").removeClass("mini-sidebar");
    }
  };
  $(window).ready(setsidebartype);
  $(window).on("resize", setsidebartype);
  //****************************
  /* This is for sidebartoggler*/
  //****************************
  $(".sidebartoggler").on("click", function () {
    $("#main-wrapper").toggleClass("mini-sidebar");
    if ($("#main-wrapper").hasClass("mini-sidebar")) {
      $(".sidebartoggler").prop("checked", !0);
      $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
    } else {
      $(".sidebartoggler").prop("checked", !1);
      $("#main-wrapper").attr("data-sidebartype", "full");
    }
  });
  $(".sidebartoggler").on("click", function () {
    $("#main-wrapper").toggleClass("show-sidebar");
  });

  $('#btn-logout').on('click', function () {
    localStorage.removeItem('user');
    window.location.href = 'login.html';
  });

  user = localStorage.getItem('user');
  if (user) {
    user = JSON.parse(user);
    $('#username').html(user.name);
    if (user.role !== 'admin') {
      $('#setup-container').hide();
    } else {
      $('#setup-container').show();
    }
  }
});

function statusBadge(status) {
  switch (status) {
    case 'pre atp':
      status = '<span class="badge rounded-pill bg-info p-2" style="font-size:0.7rem;">' + status.toUpperCase() + '</span>';
      break;
    case 'invitation':
      status = '<span class="badge rounded-pill bg-secondary p-2" style="font-size:0.7rem;">' + status.toUpperCase() + '</span>';
      break;
    case 'confirmation':
      status = '<span class="badge rounded-pill bg-primary p-2" style="font-size:0.7rem;">' + status.toUpperCase() + '</span>';
      break;
    case 'on site':
      status = '<span class="badge rounded-pill bg-warning p-2" style="font-size:0.7rem;">' + status.toUpperCase() + '</span>';
      break;
    case 'rejection':
      status = '<span class="badge rounded-pill bg-danger p-2" style="font-size:0.7rem;">' + status.toUpperCase() + '</span>';
      break;
    case 'rectification':
      status = '<span class="badge rounded-pill bg-danger p-2" style="font-size:0.7rem;">' + status.toUpperCase() + '</span>';
      break;
    case 'system':
      status = '<span class="badge rounded-pill bg-dark p-2" style="font-size:0.7rem;">' + status.toUpperCase() + '</span>';
      break;
    case 'done':
      status = '<span class="badge rounded-pill bg-success p-2" style="font-size:0.7rem;">' + status.toUpperCase() + '</span>';
      break;
    case 'admin':
      status = '<span class="badge rounded-pill bg-primary p-2" style="font-size:0.7rem;">' + status.toUpperCase() + '</span>';
      break;
    case 'member':
      status = '<span class="badge rounded-pill bg-warning p-2" style="font-size:0.7rem;">' + status.toUpperCase() + '</span>';
      break;
  }
  return status;
}